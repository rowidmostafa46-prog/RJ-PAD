<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RJ PAD | Ù…Ù…Ù„ÙƒÙ€Ø© Ø§Ù„Ø¥Ø¨Ù€Ø¯Ø§Ø¹</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --accent: #8b0000;
            --text: #ffffff;
            --card: #151515;
        }
        body { background-color: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; }
        header { background: linear-gradient(to bottom, #000, var(--accent)); padding: 40px; text-align: center; border-bottom: 3px solid var(--accent); }
        .logo { font-size: 3.5rem; font-weight: 900; letter-spacing: 8px; text-shadow: 0 0 15px #ff0000; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© */
        .rules { border: 2px dashed var(--accent); padding: 20px; border-radius: 15px; margin-bottom: 30px; background: rgba(139, 0, 0, 0.1); }
        .rules h2 { color: #ff4d4d; text-align: center; }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù†Ø´Ø± */
        .publish-box { background: var(--card); padding: 25px; border-radius: 15px; border: 1px solid var(--accent); margin-bottom: 40px; display: none; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; background: #222; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        button { background: var(--accent); color: white; border: none; padding: 12px 30px; cursor: pointer; font-weight: bold; border-radius: 5px; width: 100%; font-size: 1.1rem; }
        button:hover { background: #ff0000; box-shadow: 0 0 15px #ff0000; }

        /* Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆØ§ÙŠØ§Øª */
        .stories-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .story-card { background: var(--card); border: 1px solid #333; border-radius: 10px; overflow: hidden; }
        .story-cover { width: 100%; height: 300px; object-fit: cover; }
        .story-info { padding: 15px; }
        .story-title { font-size: 1.3rem; color: #ff4d4d; margin-bottom: 5px; }
        .story-idea { font-size: 0.9rem; color: #bbb; border-right: 3px solid var(--accent); padding-right: 10px; }
        
        #loginBtn { background: white; color: black; width: auto; margin: 20px auto; display: block; }
    </style>
</head>
<body>

<header>
    <div class="logo">RJ PAD</div>
    <p>âš¡ Ù…Ù€Ù†Ù€ØµÙ€Ø© Ø§Ù„Ø¥Ø¨Ù€Ø¯Ø§Ø¹ ÙˆØ§Ù„Ù€Ø®Ù€ÙŠÙ€Ø§Ù„ Ø§Ù„Ù€Ø±Ø¹Ù€Ø¯ÙŠ âš¡</p>
    <button id="loginBtn">Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google</button>
</header>

<div class="container">
    <div class="rules">
        <h2>ğŸ“œ Ø¯ÙØ³Ù€ØªÙ€ÙˆØ± Ø§Ù„Ù€Ù…Ù€Ù†Ù€ØµÙ€Ø© ğŸ“œ</h2>
        <p>ğŸ’€ Ù…Ù€Ù…Ù€Ù†ÙˆØ¹ Ø³Ù€Ø±Ù‚Ø© Ø§Ù„Ø±ÙˆØ§ÙŠØ§ØªØ› Ø§Ù„Ø³Ø§Ø±Ù‚ ÙŠÙ„Ø§Ø­Ù‚ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ§Ù‹.</p>
        <p>ğŸ” Ù…Ù€Ù…Ù€Ù†ÙˆØ¹ +18Ø› Ø§Ù„Ù†Ø´Ø± ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø·Ø±Ø¯ Ø§Ù„Ø£Ø¨Ø¯ÙŠ.</p>
        <p>ğŸ–‹ï¸ Ø¶Ù€Ø¹ ÙÙ€ÙƒØ±Ø© Ø§Ù„Ø±ÙˆØ§ÙŠØ© Ø£Ø³ÙÙ„ Ø§Ù„ØºÙ„Ø§Ù Ø¯Ø§Ø¦Ù…Ø§Ù‹.</p>
    </div>

    <div id="publishSection" class="publish-box">
        <h3>âœ¦ Ø§Ù†Ø´Ø± Ø£Ø³Ø·ÙˆØ±ØªÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© âœ¦</h3>
        <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±ÙˆØ§ÙŠØ© / Ø§Ù„Ù…Ø§Ù†ØºØ§">
        <input type="text" id="cover" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù (URL)">
        <textarea id="idea" rows="4" placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±Ø© Ø§Ù„Ø±ÙˆØ§ÙŠØ© Ù‡Ù†Ø§ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)"></textarea>
        <button id="submitBtn">Ù†Ø´Ø± Ø§Ù„Ø¢Ù† ÙÙŠ RJ PAD âš¡</button>
    </div>

    <h3 style="border-bottom: 2px solid var(--accent); padding-bottom: 10px;">Ø¢Ø®Ù€Ø± Ø§Ù„Ø¥ØµÙ€Ø¯Ø§Ø±Ø§Øª</h3>
    <div id="storiesContainer" class="stories-grid"></div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
    const firebaseConfig = {
        apiKey: "AIzaSyCqosyyE5ievwHPrfa6oJL2FD7uAjY2Y5I",
        authDomain: "rj-pad.firebaseapp.com",
        projectId: "rj-pad",
        storageBucket: "rj-pad.firebasestorage.app",
        messagingSenderId: "160358264882",
        appId: "1:160358264882:web:c243cda30c359266ed4c2b",
        measurementId: "G-KVES8VFWMJ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    document.getElementById('loginBtn').onclick = () => {
        signInWithPopup(auth, provider).then(() => location.reload());
    };

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    onAuthStateChanged(auth, (user) => {
        if (user) {
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('publishSection').style.display = 'block';
        }
    });

    // Ø§Ù„Ù†Ø´Ø±
    document.getElementById('submitBtn').onclick = async () => {
        const title = document.getElementById('title').value;
        const cover = document.getElementById('cover').value;
        const idea = document.getElementById('idea').value;

        if (title && cover && idea) {
            await addDoc(collection(db, "stories"), {
                title, cover, idea,
                author: auth.currentUser.displayName,
                createdAt: serverTimestamp()
            });
            alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!");
            location.reload();
        } else { alert("Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª!"); }
    };

    // Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆØ§ÙŠØ§Øª
    const q = query(collection(db, "stories"), orderBy("createdAt", "desc"));
    onSnapshot(q, (snapshot) => {
        const container = document.getElementById('storiesContainer');
        container.innerHTML = '';
        snapshot.forEach((doc) => {
            const data = doc.data();
            container.innerHTML += `
                <div class="story-card">
                    <img src="${data.cover}" class="story-cover">
                    <div class="story-info">
                        <div class="story-title">${data.title}</div>
                        <div class="story-idea">${data.idea}</div>
                        <p style="font-size: 0.7rem; color: gray;">Ø§Ù„Ù…Ø¤Ù„Ù: ${data.author}</p>
                    </div>
                </div>`;
        });
    });
</script>
</body>
</html>
